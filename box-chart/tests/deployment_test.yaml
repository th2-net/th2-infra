suite: test deploy and service
values:
  - values.yaml
templates:
  - component.yaml
release:
  name: my-release
  namespace: my-namespace
  revision: 1
  isUpgrade: true
capabilities:
  majorVersion: 1
  minorVersion: 10
  apiVersions:
    - br.dev.local/v1
chart:
  version: 1.0.0
  appVersion: 1.0.0
tests:
  - it: test hostAliases
    template: component.yaml
    set:
      image.tag: latest
      image.pullPolicy: Always
      resources:
        limits:
          memory: 128Mi
    release:
      name: my-release
      namespace:
      revision: 9
      isUpgrade: true
    capabilities:
      majorVersion: 1
      minorVersion: 12
      apiVersions:
        - custom.api/v1
    asserts:
      - isKind:
          of: Deployment
        documentIndex: 1
      - equal:
          path: spec.template.spec.hostAliases[0].ip
          value: 127.0.0.1
        documentIndex: 1